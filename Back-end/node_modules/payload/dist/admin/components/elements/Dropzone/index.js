"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "Dropzone", {
    enumerable: true,
    get: function() {
        return Dropzone;
    }
});
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _reacti18next = require("react-i18next");
const _Button = /*#__PURE__*/ _interop_require_default(require("../Button"));
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const handleDragOver = (e)=>{
    e.preventDefault();
    e.stopPropagation();
};
const baseClass = 'dropzone';
const Dropzone = ({ onChange, className, mimeTypes })=>{
    const dropRef = _react.default.useRef(null);
    const [dragging, setDragging] = _react.default.useState(false);
    const inputRef = _react.default.useRef(null);
    const { t } = (0, _reacti18next.useTranslation)([
        'upload',
        'general'
    ]);
    const handlePaste = _react.default.useCallback((e)=>{
        e.preventDefault();
        e.stopPropagation();
        if (e.clipboardData.files && e.clipboardData.files.length > 0) {
            onChange(e.clipboardData.files);
        }
    }, [
        onChange
    ]);
    const handleDragEnter = _react.default.useCallback((e)=>{
        e.preventDefault();
        e.stopPropagation();
        setDragging(true);
    }, []);
    const handleDragLeave = _react.default.useCallback((e)=>{
        e.preventDefault();
        e.stopPropagation();
        setDragging(false);
    }, []);
    const handleDrop = _react.default.useCallback((e)=>{
        e.preventDefault();
        e.stopPropagation();
        setDragging(false);
        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
            onChange(e.dataTransfer.files);
            setDragging(false);
            e.dataTransfer.clearData();
        }
    }, [
        onChange
    ]);
    const handleFileSelection = _react.default.useCallback((e)=>{
        if (e.target.files && e.target.files.length > 0) {
            onChange(e.target.files);
        }
    }, [
        onChange
    ]);
    _react.default.useEffect(()=>{
        const div = dropRef.current;
        if (div) {
            div.addEventListener('dragenter', handleDragEnter);
            div.addEventListener('dragleave', handleDragLeave);
            div.addEventListener('dragover', handleDragOver);
            div.addEventListener('drop', handleDrop);
            div.addEventListener('paste', handlePaste);
            return ()=>{
                div.removeEventListener('dragenter', handleDragEnter);
                div.removeEventListener('dragleave', handleDragLeave);
                div.removeEventListener('dragover', handleDragOver);
                div.removeEventListener('drop', handleDrop);
                div.removeEventListener('paste', handlePaste);
            };
        }
        return ()=>null;
    }, [
        handleDragEnter,
        handleDragLeave,
        handleDrop,
        handlePaste
    ]);
    const classes = [
        baseClass,
        className,
        dragging ? 'dragging' : ''
    ].filter(Boolean).join(' ');
    return /*#__PURE__*/ _react.default.createElement("div", {
        ref: dropRef,
        className: classes
    }, /*#__PURE__*/ _react.default.createElement(_Button.default, {
        size: "small",
        buttonStyle: "secondary",
        onClick: ()=>{
            inputRef.current.click();
        },
        className: `${baseClass}__file-button`
    }, t('selectFile')), /*#__PURE__*/ _react.default.createElement("input", {
        ref: inputRef,
        type: "file",
        accept: mimeTypes?.join(','),
        onChange: handleFileSelection,
        className: `${baseClass}__hidden-input`
    }), /*#__PURE__*/ _react.default.createElement("p", {
        className: `${baseClass}__label`
    }, t('or'), ' ', t('dragAndDrop')));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL2VsZW1lbnRzL0Ryb3B6b25lL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0JztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vQnV0dG9uJztcblxuaW1wb3J0ICcuL2luZGV4LnNjc3MnO1xuXG5jb25zdCBoYW5kbGVEcmFnT3ZlciA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xufTtcblxuY29uc3QgYmFzZUNsYXNzID0gJ2Ryb3B6b25lJztcblxudHlwZSBQcm9wcyA9IHtcbiAgb25DaGFuZ2U6IChlOiBGaWxlTGlzdCkgPT4gdm9pZDtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBtaW1lVHlwZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNvbnN0IERyb3B6b25lOiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBvbkNoYW5nZSwgY2xhc3NOYW1lLCBtaW1lVHlwZXMgfSkgPT4ge1xuICBjb25zdCBkcm9wUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2RyYWdnaW5nLCBzZXREcmFnZ2luZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGlucHV0UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oWyd1cGxvYWQnLCAnZ2VuZXJhbCddKTtcblxuICBjb25zdCBoYW5kbGVQYXN0ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBDbGlwYm9hcmRFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKGUuY2xpcGJvYXJkRGF0YS5maWxlcyAmJiBlLmNsaXBib2FyZERhdGEuZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgb25DaGFuZ2UoZS5jbGlwYm9hcmREYXRhLmZpbGVzKTtcbiAgICB9XG4gIH0sIFtvbkNoYW5nZV0pO1xuXG4gIGNvbnN0IGhhbmRsZURyYWdFbnRlciA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXREcmFnZ2luZyh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZURyYWdMZWF2ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXREcmFnZ2luZyhmYWxzZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVEcm9wID0gUmVhY3QudXNlQ2FsbGJhY2soKGU6IERyYWdFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHNldERyYWdnaW5nKGZhbHNlKTtcblxuICAgIGlmIChlLmRhdGFUcmFuc2Zlci5maWxlcyAmJiBlLmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBvbkNoYW5nZShlLmRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgICBzZXREcmFnZ2luZyhmYWxzZSk7XG5cbiAgICAgIGUuZGF0YVRyYW5zZmVyLmNsZWFyRGF0YSgpO1xuICAgIH1cbiAgfSwgW29uQ2hhbmdlXSk7XG5cbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdGlvbiA9IFJlYWN0LnVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGlmIChlLnRhcmdldC5maWxlcyAmJiBlLnRhcmdldC5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBvbkNoYW5nZShlLnRhcmdldC5maWxlcyk7XG4gICAgfVxuICB9LCBbb25DaGFuZ2VdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGRyb3BSZWYuY3VycmVudDtcblxuICAgIGlmIChkaXYpIHtcbiAgICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVEcmFnRW50ZXIpO1xuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3Zlcik7XG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgaGFuZGxlUGFzdGUpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlRHJhZ0VudGVyKTtcbiAgICAgICAgZGl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG4gICAgICAgIGRpdi5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKTtcbiAgICAgICAgZGl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICAgICAgZGl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgaGFuZGxlUGFzdGUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4gbnVsbDtcbiAgfSwgW2hhbmRsZURyYWdFbnRlciwgaGFuZGxlRHJhZ0xlYXZlLCBoYW5kbGVEcm9wLCBoYW5kbGVQYXN0ZV0pO1xuXG4gIGNvbnN0IGNsYXNzZXMgPSBbXG4gICAgYmFzZUNsYXNzLFxuICAgIGNsYXNzTmFtZSxcbiAgICBkcmFnZ2luZyA/ICdkcmFnZ2luZycgOiAnJyxcbiAgXS5maWx0ZXIoQm9vbGVhbikuam9pbignICcpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtkcm9wUmVmfVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzfVxuICAgID5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgYnV0dG9uU3R5bGU9XCJzZWNvbmRhcnlcIlxuICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5jbGljaygpO1xuICAgICAgICB9fVxuICAgICAgICBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2ZpbGUtYnV0dG9uYH1cbiAgICAgID5cbiAgICAgICAge3QoJ3NlbGVjdEZpbGUnKX1cbiAgICAgIDwvQnV0dG9uPlxuXG4gICAgICA8aW5wdXRcbiAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICBhY2NlcHQ9e21pbWVUeXBlcz8uam9pbignLCcpfVxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZVNlbGVjdGlvbn1cbiAgICAgICAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19oaWRkZW4taW5wdXRgfVxuICAgICAgLz5cblxuICAgICAgPHAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19sYWJlbGB9PlxuICAgICAgICB7dCgnb3InKX1cbiAgICAgICAgeycgJ31cbiAgICAgICAge3QoJ2RyYWdBbmREcm9wJyl9XG4gICAgICA8L3A+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIkRyb3B6b25lIiwiaGFuZGxlRHJhZ092ZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJiYXNlQ2xhc3MiLCJvbkNoYW5nZSIsImNsYXNzTmFtZSIsIm1pbWVUeXBlcyIsImRyb3BSZWYiLCJSZWFjdCIsInVzZVJlZiIsImRyYWdnaW5nIiwic2V0RHJhZ2dpbmciLCJ1c2VTdGF0ZSIsImlucHV0UmVmIiwidCIsInVzZVRyYW5zbGF0aW9uIiwiaGFuZGxlUGFzdGUiLCJ1c2VDYWxsYmFjayIsImNsaXBib2FyZERhdGEiLCJmaWxlcyIsImxlbmd0aCIsImhhbmRsZURyYWdFbnRlciIsImhhbmRsZURyYWdMZWF2ZSIsImhhbmRsZURyb3AiLCJkYXRhVHJhbnNmZXIiLCJjbGVhckRhdGEiLCJoYW5kbGVGaWxlU2VsZWN0aW9uIiwidGFyZ2V0IiwidXNlRWZmZWN0IiwiZGl2IiwiY3VycmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xhc3NlcyIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwicmVmIiwiQnV0dG9uIiwic2l6ZSIsImJ1dHRvblN0eWxlIiwib25DbGljayIsImNsaWNrIiwiaW5wdXQiLCJ0eXBlIiwiYWNjZXB0IiwicCJdLCJtYXBwaW5ncyI6Ijs7OzsrQkFtQmFBOzs7ZUFBQUE7Ozs4REFuQks7OEJBQ2E7K0RBQ1o7UUFFWjs7Ozs7O0FBRVAsTUFBTUMsaUJBQWlCLENBQUNDO0lBQ3RCQSxFQUFFQyxjQUFjO0lBQ2hCRCxFQUFFRSxlQUFlO0FBQ25CO0FBRUEsTUFBTUMsWUFBWTtBQVFYLE1BQU1MLFdBQTRCLENBQUMsRUFBRU0sUUFBUSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUMxRSxNQUFNQyxVQUFVQyxjQUFLLENBQUNDLE1BQU0sQ0FBaUI7SUFDN0MsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdILGNBQUssQ0FBQ0ksUUFBUSxDQUFDO0lBQy9DLE1BQU1DLFdBQVdMLGNBQUssQ0FBQ0MsTUFBTSxDQUFDO0lBRTlCLE1BQU0sRUFBRUssQ0FBQyxFQUFFLEdBQUdDLElBQUFBLDRCQUFjLEVBQUM7UUFBQztRQUFVO0tBQVU7SUFFbEQsTUFBTUMsY0FBY1IsY0FBSyxDQUFDUyxXQUFXLENBQUMsQ0FB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