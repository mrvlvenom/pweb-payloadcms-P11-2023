"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _qs = /*#__PURE__*/ _interop_require_default(require("qs"));
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _validations = require("../../../../../fields/validations");
const _wordBoundariesRegex = /*#__PURE__*/ _interop_require_default(require("../../../../../utilities/wordBoundariesRegex"));
const _useDebouncedCallback = require("../../../../hooks/useDebouncedCallback");
const _ReactSelect = /*#__PURE__*/ _interop_require_default(require("../../../elements/ReactSelect"));
const _Auth = require("../../../utilities/Auth");
const _Config = require("../../../utilities/Config");
const _GetFilterOptions = require("../../../utilities/GetFilterOptions");
const _Locale = require("../../../utilities/Locale");
const _Error = /*#__PURE__*/ _interop_require_default(require("../../Error"));
const _FieldDescription = /*#__PURE__*/ _interop_require_default(require("../../FieldDescription"));
const _context = require("../../Form/context");
const _Label = /*#__PURE__*/ _interop_require_default(require("../../Label"));
const _useField = /*#__PURE__*/ _interop_require_default(require("../../useField"));
const _withCondition = /*#__PURE__*/ _interop_require_default(require("../../withCondition"));
const _AddNew = require("./AddNew");
const _createRelationMap = require("./createRelationMap");
const _findOptionsByValue = require("./findOptionsByValue");
require("./index.scss");
const _optionsReducer = /*#__PURE__*/ _interop_require_default(require("./optionsReducer"));
const _MultiValueLabel = require("./select-components/MultiValueLabel");
const _SingleValue = require("./select-components/SingleValue");
const _shared = require("../shared");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const maxResultsPerRequest = 10;
const baseClass = 'relationship';
const Relationship = (props)=>{
    const { name, admin: { allowCreate = true, className, condition, description, isSortable = true, readOnly, style, width } = {}, filterOptions, hasMany, label, path, relationTo, required, validate = _validations.relationship } = props;
    const config = (0, _Config.useConfig)();
    const { collections, routes: { api }, serverURL } = config;
    const { i18n, t } = (0, _reacti18next.useTranslation)('fields');
    const { permissions } = (0, _Auth.useAuth)();
    const { code: locale } = (0, _Locale.useLocale)();
    const formProcessing = (0, _context.useFormProcessing)();
    const hasMultipleRelations = Array.isArray(relationTo);
    const [options, dispatchOptions] = (0, _react.useReducer)(_optionsReducer.default, []);
    const [lastFullyLoadedRelation, setLastFullyLoadedRelation] = (0, _react.useState)(-1);
    const [lastLoadedPage, setLastLoadedPage] = (0, _react.useState)({});
    const [errorLoading, setErrorLoading] = (0, _react.useState)('');
    const [filterOptionsResult, setFilterOptionsResult] = (0, _react.useState)();
    const [search, setSearch] = (0, _react.useState)('');
    const [isLoading, setIsLoading] = (0, _react.useState)(false);
    const [hasLoadedFirstPage, setHasLoadedFirstPage] = (0, _react.useState)(false);
    const [enableWordBoundarySearch, setEnableWordBoundarySearch] = (0, _react.useState)(false);
    const firstRun = (0, _react.useRef)(true);
    const pathOrName = path || name;
    const memoizedValidate = (0, _react.useCallback)((value, validationOptions)=>{
        return validate(value, {
            ...validationOptions,
            required
        });
    }, [
        validate,
        required
    ]);
    const { errorMessage, initialValue, setValue, showError, value } = (0, _useField.default)({
        condition,
        path: pathOrName,
        validate: memoizedValidate
    });
    const [drawerIsOpen, setDrawerIsOpen] = (0, _react.useState)(false);
    const getResults = (0, _react.useCallback)(async ({ lastFullyLoadedRelation: lastFullyLoadedRelationArg, onSuccess, search: searchArg, sort, value: valueArg })=>{
        if (!permissions) {
            return;
        }
        const lastFullyLoadedRelationToUse = typeof lastFullyLoadedRelationArg !== 'undefined' ? lastFullyLoadedRelationArg : -1;
        const relations = Array.isArray(relationTo) ? relationTo : [
            relationTo
        ];
        const relationsToFetch = lastFullyLoadedRelationToUse === -1 ? relations : relations.slice(lastFullyLoadedRelationToUse + 1);
        let resultsFetched = 0;
        const relationMap = (0, _createRelationMap.createRelationMap)({
            hasMany,
            relationTo,
            value: valueArg
        });
        if (!errorLoading) {
            relationsToFetch.reduce(async (priorRelation, relation)=>{
                let lastLoadedPageToUse;
                if (search !== searchArg) {
                    lastLoadedPageToUse = 1;
                } else {
                    lastLoadedPageToUse = lastLoadedPage[relation] + 1;
                }
                await priorRelation;
                if (resultsFetched < 10) {
                    const collection = collections.find((coll)=>coll.slug === relation);
                    const fieldToSearch = collection?.admin?.useAsTitle || 'id';
                    const query = {
                        depth: 0,
                        limit: maxResultsPerRequest,
                        locale,
                        page: lastLoadedPageToUse,
                        sort: fieldToSearch,
                        where: {
                            and: [
                                {
                                    id: {
                                        not_in: relationMap[relation]
                                    }
                                }
                            ]
                        }
                    };
                    if (searchArg) {
                        query.where.and.push({
                            [fieldToSearch]: {
                                like: searchArg
                            }
                        });
                    }
                    if (filterOptionsResult?.[relation]) {
                        query.where.and.push(filterOptionsResult[relation]);
                    }
                    const response = await fetch(`${serverURL}${api}/${relation}?${_qs.default.stringify(query)}`, {
                        credentials: 'include',
                        headers: {
                            'Accept-Language': i18n.language
                        }
                    });
                    if (response.ok) {
                        const data = await response.json();
                        setLastLoadedPage((prevState)=>{
                            return {
                                ...prevState,
                                [relation]: lastLoadedPageToUse
                            };
                        });
                        if (!data.nextPage) {
                            setLastFullyLoadedRelation(relations.indexOf(relation));
                        }
                        if (data.docs.length > 0) {
                            resultsFetched += data.docs.length;
                            dispatchOptions({
                                collection,
                                config,
                                docs: data.docs,
                                i18n,
                                sort,
                                type: 'ADD'
                            });
                        }
                    } else if (response.status === 403) {
                        setLastFullyLoadedRelation(relations.indexOf(relation));
                        dispatchOptions({
                            collection,
                            config,
                            docs: [],
                            i18n,
                            ids: relationMap[relation],
                            sort,
                            type: 'ADD'
                        });
                    } else {
                        setErrorLoading(t('error:unspecific'));
                    }
                }
            }, Promise.resolve());
            if (typeof onSuccess === 'function') onSuccess();
        }
    }, [
        permissions,
        relationTo,
        hasMany,
        errorLoading,
        search,
        lastLoadedPage,
        collections,
        locale,
        filterOptionsResult,
        serverURL,
        api,
        i18n,
        config,
        t
    ]);
    const updateSearch = (0, _useDebouncedCallback.useDebouncedCallback)((searchArg, valueArg)=>{
        getResults({
            search: searchArg,
            sort: true,
            value: valueArg
        });
        setSearch(searchArg);
    }, 300);
    const handleInputChange = (0, _react.useCallback)((searchArg, valueArg)=>{
        if (search !== searchArg) {
            setLastLoadedPage({});
            updateSearch(searchArg, valueArg);
        }
    }, [
        search,
        updateSearch
    ]);
    // ///////////////////////////////////
    // Ensure we have an option for each value
    // ///////////////////////////////////
    (0, _react.useEffect)(()=>{
        const relationMap = (0, _createRelationMap.createRelationMap)({
            hasMany,
            relationTo,
            value
        });
        Object.entries(relationMap).reduce(async (priorRelation, [relation, ids])=>{
            await priorRelation;
            const idsToLoad = ids.filter((id)=>{
                return !options.find((optionGroup)=>optionGroup?.options?.find((option)=>option.value === id && option.relationTo === relation));
            });
            if (idsToLoad.length > 0) {
                const query = {
                    depth: 0,
                    limit: idsToLoad.length,
                    locale,
                    where: {
                        id: {
                            in: idsToLoad
                        }
                    }
                };
                if (!errorLoading) {
                    const response = await fetch(`${serverURL}${api}/${relation}?${_qs.default.stringify(query)}`, {
                        credentials: 'include',
                        headers: {
                            'Accept-Language': i18n.language
                        }
                    });
                    const collection = collections.find((coll)=>coll.slug === relation);
                    let docs = [];
                    if (response.ok) {
                        const data = await response.json();
                        docs = data.docs;
                    }
                    dispatchOptions({
                        collection,
                        config,
                        docs,
                        i18n,
                        ids: idsToLoad,
                        sort: true,
                        type: 'ADD'
                    });
                }
            }
        }, Promise.resolve());
    }, [
        options,
        value,
        hasMany,
        errorLoading,
        collections,
        hasMultipleRelations,
        serverURL,
        api,
        i18n,
        relationTo,
        locale,
        config
    ]);
    // Determine if we should switch to word boundary search
    (0, _react.useEffect)(()=>{
        const relations = Array.isArray(relationTo) ? relationTo : [
            relationTo
        ];
        const isIdOnly = relations.reduce((idOnly, relation)=>{
            const collection = collections.find((coll)=>coll.slug === relation);
            const fieldToSearch = collection?.admin?.useAsTitle || 'id';
            return fieldToSearch === 'id' && idOnly;
        }, true);
        setEnableWordBoundarySearch(!isIdOnly);
    }, [
        relationTo,
        collections
    ]);
    // When (`relationTo` || `filterOptionsResult` || `locale`) changes, reset component
    // Note - effect should not run on first run
    (0, _react.useEffect)(()=>{
        if (firstRun.current) {
            firstRun.current = false;
            return;
        }
        dispatchOptions({
            type: 'CLEAR'
        });
        setLastFullyLoadedRelation(-1);
        setLastLoadedPage({});
        setHasLoadedFirstPage(false);
    }, [
        relationTo,
        filterOptionsResult,
        locale
    ]);
    const onSave = (0, _react.useCallback)((args)=>{
        dispatchOptions({
            collection: args.collectionConfig,
            config,
            doc: args.doc,
            i18n,
            type: 'UPDATE'
        });
    }, [
        i18n,
        config
    ]);
    const filterOption = (0, _react.useCallback)((item, searchFilter)=>{
        if (!searchFilter) {
            return true;
        }
        const r = (0, _wordBoundariesRegex.default)(searchFilter || '');
        // breaking the labels to search into smaller parts increases performance
        const breakApartThreshold = 250;
        let string = item.label;
        // strings less than breakApartThreshold length won't be chunked
        while(string.length > breakApartThreshold){
            // slicing by the next space after the length of the search input prevents slicing the string up by partial words
            const indexOfSpace = string.indexOf(' ', searchFilter.length);
            if (r.test(string.slice(0, indexOfSpace === -1 ? searchFilter.length : indexOfSpace + 1))) {
                return true;
            }
            string = string.slice(indexOfSpace === -1 ? searchFilter.length : indexOfSpace + 1);
        }
        return r.test(string.slice(-breakApartThreshold));
    }, []);
    const valueToRender = (0, _findOptionsByValue.findOptionsByValue)({
        options,
        value
    });
    if (!Array.isArray(valueToRender) && valueToRender?.value === 'null') valueToRender.value = null;
    return /*#__PURE__*/ _react.default.createElement("div", {
        className: [
            _shared.fieldBaseClass,
            baseClass,
            className,
            showError && 'error',
            errorLoading && 'error-loading',
            readOnly && `${baseClass}--read-only`
        ].filter(Boolean).join(' '),
        id: `field-${pathOrName.replace(/\./g, '__')}`,
        style: {
            ...style,
            width
        }
    }, /*#__PURE__*/ _react.default.createElement(_Error.default, {
        message: errorMessage,
        showError: showError
    }), /*#__PURE__*/ _react.default.createElement(_Label.default, {
        htmlFor: pathOrName,
        label: label,
        required: required
    }), /*#__PURE__*/ _react.default.createElement(_GetFilterOptions.GetFilterOptions, {
        filterOptions,
        filterOptionsResult,
        path: pathOrName,
        relationTo,
        setFilterOptionsResult
    }), !errorLoading && /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__wrap`
    }, /*#__PURE__*/ _react.default.createElement(_ReactSelect.default, {
        backspaceRemovesValue: !drawerIsOpen,
        components: {
            MultiValueLabel: _MultiValueLabel.MultiValueLabel,
            SingleValue: _SingleValue.SingleValue
        },
        customProps: {
            disableKeyDown: drawerIsOpen,
            disableMouseDown: drawerIsOpen,
            onSave,
            setDrawerIsOpen
        },
        disabled: readOnly || formProcessing,
        filterOption: enableWordBoundarySearch ? filterOption : undefined,
        isLoading: isLoading,
        isMulti: hasMany,
        isSortable: isSortable,
        onChange: !readOnly ? (selected)=>{
            if (selected === null) {
                setValue(hasMany ? [] : null);
            } else if (hasMany) {
                setValue(selected ? selected.map((option)=>{
                    if (hasMultipleRelations) {
                        return {
                            relationTo: option.relationTo,
                            value: option.value
                        };
                    }
                    return option.value;
                }) : null);
            } else if (hasMultipleRelations) {
                setValue({
                    relationTo: selected.relationTo,
                    value: selected.value
                });
            } else {
                setValue(selected.value);
            }
        } : undefined,
        onInputChange: (newSearch)=>handleInputChange(newSearch, value),
        onMenuOpen: ()=>{
            if (!hasLoadedFirstPage) {
                setIsLoading(true);
                getResults({
                    onSuccess: ()=>{
                        setHasLoadedFirstPage(true);
                        setIsLoading(false);
                    },
                    value: initialValue
                });
            }
        },
        onMenuScrollToBottom: ()=>{
            getResults({
                lastFullyLoadedRelation,
                search,
                sort: false,
                value: initialValue
            });
        },
        options: options,
        showError: showError,
        value: valueToRender ?? null
    }), !readOnly && allowCreate && /*#__PURE__*/ _react.default.createElement(_AddNew.AddNewRelation, {
        dispatchOptions,
        hasMany,
        options,
        path: pathOrName,
        relationTo,
        setValue,
        value
    })), errorLoading && /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__error-loading`
    }, errorLoading), /*#__PURE__*/ _react.default.createElement(_FieldDescription.default, {
        description: description,
        value: value
    }));
};
const _default = (0, _withCondition.default)(Relationship);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL2Zvcm1zL2ZpZWxkLXR5cGVzL1JlbGF0aW9uc2hpcC9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHFzIGZyb20gJ3FzJ1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZHVjZXIsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuaW1wb3J0IHR5cGUgeyBQYWdpbmF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZGF0YWJhc2UvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFdoZXJlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdHlwZXMnXG5pbXBvcnQgdHlwZSB7IERvY3VtZW50RHJhd2VyUHJvcHMgfSBmcm9tICcuLi8uLi8uLi9lbGVtZW50cy9Eb2N1bWVudERyYXdlci90eXBlcydcbmltcG9ydCB0eXBlIHsgRmlsdGVyT3B0aW9uc1Jlc3VsdCwgR2V0UmVzdWx0cywgT3B0aW9uLCBQcm9wcywgVmFsdWUgfSBmcm9tICcuL3R5cGVzJ1xuXG5pbXBvcnQgeyByZWxhdGlvbnNoaXAgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9maWVsZHMvdmFsaWRhdGlvbnMnXG5pbXBvcnQgd29yZEJvdW5kYXJpZXNSZWdleCBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvd29yZEJvdW5kYXJpZXNSZWdleCdcbmltcG9ydCB7IHVzZURlYm91bmNlZENhbGxiYWNrIH0gZnJvbSAnLi4vLi4vLi4vLi4vaG9va3MvdXNlRGVib3VuY2VkQ2FsbGJhY2snXG5pbXBvcnQgUmVhY3RTZWxlY3QgZnJvbSAnLi4vLi4vLi4vZWxlbWVudHMvUmVhY3RTZWxlY3QnXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL0F1dGgnXG5pbXBvcnQgeyB1c2VDb25maWcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvQ29uZmlnJ1xuaW1wb3J0IHsgR2V0RmlsdGVyT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9HZXRGaWx0ZXJPcHRpb25zJ1xuaW1wb3J0IHsgdXNlTG9jYWxlIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL0xvY2FsZSdcbmltcG9ydCBFcnJvciBmcm9tICcuLi8uLi9FcnJvcidcbmltcG9ydCBGaWVsZERlc2NyaXB0aW9uIGZyb20gJy4uLy4uL0ZpZWxkRGVzY3JpcHRpb24nXG5pbXBvcnQgeyB1c2VGb3JtUHJvY2Vzc2luZyB9IGZyb20gJy4uLy4uL0Zvcm0vY29udGV4dCdcbmltcG9ydCBMYWJlbCBmcm9tICcuLi8uLi9MYWJlbCdcbmltcG9ydCB1c2VGaWVsZCBmcm9tICcuLi8uLi91c2VGaWVsZCdcbmltcG9ydCB3aXRoQ29uZGl0aW9uIGZyb20gJy4uLy4uL3dpdGhDb25kaXRpb24nXG5pbXBvcnQgeyBBZGROZXdSZWxhdGlvbiB9IGZyb20gJy4vQWRkTmV3J1xuaW1wb3J0IHsgY3JlYXRlUmVsYXRpb25NYXAgfSBmcm9tICcuL2NyZWF0ZVJlbGF0aW9uTWFwJ1xuaW1wb3J0IHsgZmluZE9wdGlvbnNCeVZhbHVlIH0gZnJvbSAnLi9maW5kT3B0aW9uc0J5VmFsdWUnXG5pbXBvcnQgJy4vaW5kZXguc2NzcydcbmltcG9ydCBvcHRpb25zUmVkdWNlciBmcm9tICcuL29wdGlvbnNSZWR1Y2VyJ1xuaW1wb3J0IHsgTXVsdGlWYWx1ZUxhYmVsIH0gZnJvbSAnLi9zZWxlY3QtY29tcG9uZW50cy9NdWx0aVZhbHVlTGFiZWwnXG5pbXBvcnQgeyBTaW5nbGVWYWx1ZSB9IGZyb20gJy4vc2VsZWN0LWNvbXBvbmVudHMvU2luZ2xlVmFsdWUnXG5pbXBvcnQgeyBmaWVsZEJhc2VDbGFzcyB9IGZyb20gJy4uL3NoYXJlZCdcblxuY29uc3QgbWF4UmVzdWx0c1BlclJlcXVlc3QgPSAxMFxuXG5jb25zdCBiYXNlQ2xhc3MgPSAncmVsYXRpb25zaGlwJ1xuXG5jb25zdCBSZWxhdGlvbnNoaXA6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgbmFtZSxcbiAgICBhZG1pbjoge1xuICAgICAgYWxsb3dDcmVhdGUgPSB0cnVlLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY29uZGl0aW9uLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBpc1NvcnRhYmxlID0gdHJ1ZSxcbiAgICAgIHJlYWRPbmx5LFxuICAgICAgc3R5bGUsXG4gICAgICB3aWR0aCxcbiAgICB9ID0ge30sXG4gICAgZmlsdGVyT3B0aW9ucyxcbiAgICBoYXNNYW55LFxuICAgIGxhYmVsLFxuICAgIHBhdGgsXG4gICAgcmVsYXRpb25UbyxcbiAgICByZXF1aXJlZCxcbiAgICB2YWxpZGF0ZSA9IHJlbGF0aW9uc2hpcCxcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgY29uZmlnID0gdXNlQ29uZmlnKClcblxuICBjb25zdCB7XG4gICAgY29sbGVjdGlvbnMsXG4gICAgcm91dGVzOiB7IGFwaSB9LFxuICAgIHNlcnZlclVSTCxcbiAgfSA9IGNvbmZpZ1xuXG4gIGNvbnN0IHsgaTE4biwgdCB9ID0gdXNlVHJhbnNsYXRpb24oJ2ZpZWxkcycpXG4gIGNvbnN0IHsgcGVybWlzc2lvbnMgfSA9IHVzZUF1dGgoKVxuICBjb25zdCB7IGNvZGU6IGxvY2FsZSB9ID0gdXNlTG9jYWxlKClcbiAgY29uc3QgZm9ybVByb2Nlc3NpbmcgPSB1c2VGb3JtUHJvY2Vzc2luZygpXG4gIGNvbnN0IGhhc011bHRpcGxlUmVsYXRpb25zID0gQXJyYXkuaXNBcnJheShyZWxhdGlvblRvKVxuICBjb25zdCBbb3B0aW9ucywgZGlzcGF0Y2hPcHRpb25zXSA9IHVzZVJlZHVjZXIob3B0aW9uc1JlZHVjZXIsIFtdKVxuICBjb25zdCBbbGFzdEZ1bGx5TG9hZGVkUmVsYXRpb24sIHNldExhc3RGdWxseUxvYWRlZFJlbGF0aW9uXSA9IHVzZVN0YXRlKC0xKVxuICBjb25zdCBbbGFzdExvYWRlZFBhZ2UsIHNldExhc3RMb2FkZWRQYWdlXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KHt9KVxuICBjb25zdCBbZXJyb3JMb2FkaW5nLCBzZXRFcnJvckxvYWRpbmddID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtmaWx0ZXJPcHRpb25zUmVzdWx0LCBzZXRGaWx0ZXJPcHRpb25zUmVzdWx0XSA9IHVzZVN0YXRlPEZpbHRlck9wdGlvbnNSZXN1bHQ+KClcbiAgY29uc3QgW3NlYXJjaCwgc2V0U2VhcmNoXSA9IHVzZVN0YXRlKCcnKVxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtoYXNMb2FkZWRGaXJzdFBhZ2UsIHNldEhhc0xvYWRlZEZpcnN0UGFnZV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2VuYWJsZVdvcmRCb3VuZGFyeVNlYXJjaCwgc2V0RW5hYmxlV29yZEJvdW5kYXJ5U2VhcmNoXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBmaXJzdFJ1biA9IHVzZVJlZih0cnVlKVxuICBjb25zdCBwYXRoT3JOYW1lID0gcGF0aCB8fCBuYW1lXG5cbiAgY29uc3QgbWVtb2l6ZWRWYWxpZGF0ZSA9IHVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZSwgdmFsaWRhdGlvbk9wdGlvbnMpID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZSh2YWx1ZSwgeyAuLi52YWxpZGF0aW9uT3B0aW9ucywgcmVxdWlyZWQgfSlcbiAgICB9LFxuICAgIFt2YWxpZGF0ZSwgcmVxdWlyZWRdLFxuICApXG5cbiAgY29uc3QgeyBlcnJvck1lc3NhZ2UsIGluaXRpYWxWYWx1ZSwgc2V0VmFsdWUsIHNob3dFcnJvciwgdmFsdWUgfSA9IHVzZUZpZWxkPFZhbHVlIHwgVmFsdWVbXT4oe1xuICAgIGNvbmRpdGlvbixcbiAgICBwYXRoOiBwYXRoT3JOYW1lLFxuICAgIHZhbGlkYXRlOiBtZW1vaXplZFZhbGlkYXRlLFxuICB9KVxuXG4gIGNvbnN0IFtkcmF3ZXJJc09wZW4sIHNldERyYXdlcklzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICBjb25zdCBnZXRSZXN1bHRzOiBHZXRSZXN1bHRzID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHtcbiAgICAgIGxhc3RGdWxseUxvYWRlZFJlbGF0aW9uOiBsYXN0RnVsbHlMb2FkZWRSZWxhdGlvbkFyZyxcbiAgICAgIG9uU3VjY2VzcyxcbiAgICAgIHNlYXJjaDogc2VhcmNoQXJnLFxuICAgICAgc29ydCxcbiAgICAgIHZhbHVlOiB2YWx1ZUFyZyxcbiAgICB9KSA9PiB7XG4gICAgICBpZiAoIXBlcm1pc3Npb25zKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgbGFzdEZ1bGx5TG9hZGVkUmVsYXRpb25Ub1VzZSA9XG4gICAgICAgIHR5cGVvZiBsYXN0RnVsbHlMb2FkZWRSZWxhdGlvbkFyZyAhPT0gJ3VuZGVmaW5lZCcgPyBsYXN0RnVsbHlMb2FkZWRSZWxhdGlvbkFyZyA6IC0xXG5cbiAgICAgIGNvbnN0IHJlbGF0aW9ucyA9IEFycmF5LmlzQXJyYXkocmVsYXRpb25UbykgPyByZWxhdGlvblRvIDogW3JlbGF0aW9uVG9dXG4gICAgICBjb25zdCByZWxhdGlvbnNUb0ZldGNoID1cbiAgICAgICAgbGFzdEZ1bGx5TG9hZGVkUmVsYXRpb25Ub1VzZSA9PT0gLTFcbiAgICAgICAgICA/IHJlbGF0aW9uc1xuICAgICAgICAgIDogcmVsYXRpb25zLnNsaWNlKGxhc3RGdWxseUxvYWRlZFJlbGF0aW9uVG9Vc2UgKyAxKVxuXG4gICAgICBsZXQgcmVzdWx0c0ZldGNoZWQgPSAwXG4gICAgICBjb25zdCByZWxhdGlvbk1hcCA9IGNyZWF0ZVJlbGF0aW9uTWFwKHtcbiAgICAgICAgaGFzTWFueSxcbiAgICAgICAgcmVsYXRpb25UbyxcbiAgICAgICAgdmFsdWU6IHZhbHVlQXJnLFxuICAgICAgfSlcblxuICAgICAgaWYgKCFlcnJvckxvYWRpbmcpIHtcbiAgICAgICAgcmVsYXRpb25zVG9GZXRjaC5yZWR1Y2UoYXN5bmMgKHByaW9yUmVsYXRpb24sIHJlbGF0aW9uKSA9PiB7XG4gICAgICAgICAgbGV0IGxhc3RMb2FkZWRQYWdlVG9Vc2VcbiAgICAgICAgICBpZiAoc2VhcmNoICE9PSBzZWFyY2hBcmcpIHtcbiAgICAgICAgICAgIGxhc3RMb2FkZWRQYWdlVG9Vc2UgPSAxXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhc3RMb2FkZWRQYWdlVG9Vc2UgPSBsYXN0TG9hZGVkUGFnZVtyZWxhdGlvbl0gKyAxXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHByaW9yUmVsYXRpb25cblxuICAgICAgICAgIGlmIChyZXN1bHRzRmV0Y2hlZCA8IDEwKSB7XG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gY29sbGVjdGlvbnMuZmluZCgoY29sbCkgPT4gY29sbC5zbHVnID09PSByZWxhdGlvbilcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkVG9TZWFyY2ggPSBjb2xsZWN0aW9uPy5hZG1pbj8udXNlQXNUaXRsZSB8fCAnaWQnXG5cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5OiB7XG4gICAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IHVua25vd25cbiAgICAgICAgICAgICAgd2hlcmU6IFdoZXJlXG4gICAgICAgICAgICB9ID0ge1xuICAgICAgICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgICAgICAgbGltaXQ6IG1heFJlc3VsdHNQZXJSZXF1ZXN0LFxuICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgIHBhZ2U6IGxhc3RMb2FkZWRQYWdlVG9Vc2UsXG4gICAgICAgICAgICAgIHNvcnQ6IGZpZWxkVG9TZWFyY2gsXG4gICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgYW5kOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgbm90X2luOiByZWxhdGlvbk1hcFtyZWxhdGlvbl0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWFyY2hBcmcpIHtcbiAgICAgICAgICAgICAgcXVlcnkud2hlcmUuYW5kLnB1c2goe1xuICAgICAgICAgICAgICAgIFtmaWVsZFRvU2VhcmNoXToge1xuICAgICAgICAgICAgICAgICAgbGlrZTogc2VhcmNoQXJnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJPcHRpb25zUmVzdWx0Py5bcmVsYXRpb25dKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5LndoZXJlLmFuZC5wdXNoKGZpbHRlck9wdGlvbnNSZXN1bHRbcmVsYXRpb25dKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3NlcnZlclVSTH0ke2FwaX0vJHtyZWxhdGlvbn0/JHtxcy5zdHJpbmdpZnkocXVlcnkpfWAsIHtcbiAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiBpMThuLmxhbmd1YWdlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGE6IFBhZ2luYXRlZERvY3M8dW5rbm93bj4gPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgc2V0TGFzdExvYWRlZFBhZ2UoKHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICAgICAgICAgICAgICBbcmVsYXRpb25dOiBsYXN0TG9hZGVkUGFnZVRvVXNlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICBpZiAoIWRhdGEubmV4dFBhZ2UpIHtcbiAgICAgICAgICAgICAgICBzZXRMYXN0RnVsbHlMb2FkZWRSZWxhdGlvbihyZWxhdGlvbnMuaW5kZXhPZihyZWxhdGlvbikpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZGF0YS5kb2NzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzRmV0Y2hlZCArPSBkYXRhLmRvY3MubGVuZ3RoXG5cbiAgICAgICAgICAgICAgICBkaXNwYXRjaE9wdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgIGRvY3M6IGRhdGEuZG9jcyxcbiAgICAgICAgICAgICAgICAgIGkxOG4sXG4gICAgICAgICAgICAgICAgICBzb3J0LFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ0FERCcsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgICAgICBzZXRMYXN0RnVsbHlMb2FkZWRSZWxhdGlvbihyZWxhdGlvbnMuaW5kZXhPZihyZWxhdGlvbikpXG4gICAgICAgICAgICAgIGRpc3BhdGNoT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgZG9jczogW10sXG4gICAgICAgICAgICAgICAgaTE4bixcbiAgICAgICAgICAgICAgICBpZHM6IHJlbGF0aW9uTWFwW3JlbGF0aW9uXSxcbiAgICAgICAgICAgICAgICBzb3J0LFxuICAgICAgICAgICAgICAgIHR5cGU6ICdBREQnLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0RXJyb3JMb2FkaW5nKHQoJ2Vycm9yOnVuc3BlY2lmaWMnKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIFByb21pc2UucmVzb2x2ZSgpKVxuXG4gICAgICAgIGlmICh0eXBlb2Ygb25TdWNjZXNzID09PSAnZnVuY3Rpb24nKSBvblN1Y2Nlc3MoKVxuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgcGVybWlzc2lvbnMsXG4gICAgICByZWxhdGlvblRvLFxuICAgICAgaGFzTWFueSxcbiAgICAgIGVycm9yTG9hZGluZyxcbiAgICAgIHNlYXJjaCxcbiAgICAgIGxhc3RMb2FkZWRQYWdlLFxuICAgICAgY29sbGVjdGlvbnMsXG4gICAgICBsb2NhbGUsXG4gICAgICBmaWx0ZXJPcHRpb25zUmVzdWx0LFxuICAgICAgc2VydmVyVVJMLFxuICAgICAgYXBpLFxuICAgICAgaTE4bixcbiAgICAgIGNvbmZpZyxcbiAgICAgIHQsXG4gICAgXSxcbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZVNlYXJjaCA9IHVzZURlYm91bmNlZENhbGxiYWNrKChzZWFyY2hBcmc6IHN0cmluZywgdmFsdWVBcmc6IFZhbHVlIHwgVmFsdWVbXSkgPT4ge1xuICAgIGdldFJlc3VsdHMoeyBzZWFyY2g6IHNlYXJjaEFyZywgc29ydDogdHJ1ZSwgdmFsdWU6IHZhbHVlQXJnIH0pXG4gICAgc2V0U2VhcmNoKHNlYXJjaEFyZylcbiAgfSwgMzAwKVxuXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKHNlYXJjaEFyZzogc3RyaW5nLCB2YWx1ZUFyZzogVmFsdWUgfCBWYWx1ZVtdKSA9PiB7XG4gICAgICBpZiAoc2VhcmNoICE9PSBzZWFyY2hBcmcpIHtcbiAgICAgICAgc2V0TGFzdExvYWRlZFBhZ2Uoe30pXG4gICAgICAgIHVwZGF0ZVNlYXJjaChzZWFyY2hBcmcsIHZhbHVlQXJnKVxuICAgICAgfVxuICAgIH0sXG4gICAgW3NlYXJjaCwgdXBkYXRlU2VhcmNoXSxcbiAgKVxuXG4gIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIGFuIG9wdGlvbiBmb3IgZWFjaCB2YWx1ZVxuICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcmVsYXRpb25NYXAgPSBjcmVhdGVSZWxhdGlvbk1hcCh7XG4gICAgICBoYXNNYW55LFxuICAgICAgcmVsYXRpb25UbyxcbiAgICAgIHZhbHVlLFxuICAgIH0pXG5cbiAgICBPYmplY3QuZW50cmllcyhyZWxhdGlvbk1hcCkucmVkdWNlKGFzeW5jIChwcmlvclJlbGF0aW9uLCBbcmVsYXRpb24sIGlkc10pID0+IHtcbiAgICAgIGF3YWl0IHByaW9yUmVsYXRpb25cblxuICAgICAgY29uc3QgaWRzVG9Mb2FkID0gaWRzLmZpbHRlcigoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuICFvcHRpb25zLmZpbmQoXG4gICAgICAgICAgKG9wdGlvbkdyb3VwKSA9PlxuICAgICAgICAgICAgb3B0aW9uR3JvdXA/Lm9wdGlvbnM/LmZpbmQoXG4gICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi52YWx1ZSA9PT0gaWQgJiYgb3B0aW9uLnJlbGF0aW9uVG8gPT09IHJlbGF0aW9uLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgICAgfSlcblxuICAgICAgaWYgKGlkc1RvTG9hZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgICAgIGRlcHRoOiAwLFxuICAgICAgICAgIGxpbWl0OiBpZHNUb0xvYWQubGVuZ3RoLFxuICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgaW46IGlkc1RvTG9hZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXJyb3JMb2FkaW5nKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtzZXJ2ZXJVUkx9JHthcGl9LyR7cmVsYXRpb259PyR7cXMuc3RyaW5naWZ5KHF1ZXJ5KX1gLCB7XG4gICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogaTE4bi5sYW5ndWFnZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9ucy5maW5kKChjb2xsKSA9PiBjb2xsLnNsdWcgPT09IHJlbGF0aW9uKVxuICAgICAgICAgIGxldCBkb2NzID0gW11cblxuICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICAgICAgZG9jcyA9IGRhdGEuZG9jc1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRpc3BhdGNoT3B0aW9ucyh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgZG9jcyxcbiAgICAgICAgICAgIGkxOG4sXG4gICAgICAgICAgICBpZHM6IGlkc1RvTG9hZCxcbiAgICAgICAgICAgIHNvcnQ6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiAnQUREJyxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKCkpXG4gIH0sIFtcbiAgICBvcHRpb25zLFxuICAgIHZhbHVlLFxuICAgIGhhc01hbnksXG4gICAgZXJyb3JMb2FkaW5nLFxuICAgIGNvbGxlY3Rpb25zLFxuICAgIGhhc011bHRpcGxlUmVsYXRpb25zLFxuICAgIHNlcnZlclVSTCxcbiAgICBhcGksXG4gICAgaTE4bixcbiAgICByZWxhdGlvblRvLFxuICAgIGxvY2FsZSxcbiAgICBjb25maWcsXG4gIF0pXG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBzd2l0Y2ggdG8gd29yZCBib3VuZGFyeSBzZWFyY2hcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCByZWxhdGlvbnMgPSBBcnJheS5pc0FycmF5KHJlbGF0aW9uVG8pID8gcmVsYXRpb25UbyA6IFtyZWxhdGlvblRvXVxuICAgIGNvbnN0IGlzSWRPbmx5ID0gcmVsYXRpb25zLnJlZHVjZSgoaWRPbmx5LCByZWxhdGlvbikgPT4ge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25zLmZpbmQoKGNvbGwpID0+IGNvbGwuc2x1ZyA9PT0gcmVsYXRpb24pXG4gICAgICBjb25zdCBmaWVsZFRvU2VhcmNoID0gY29sbGVjdGlvbj8uYWRtaW4/LnVzZUFzVGl0bGUgfHwgJ2lkJ1xuICAgICAgcmV0dXJuIGZpZWxkVG9TZWFyY2ggPT09ICdpZCcgJiYgaWRPbmx5XG4gICAgfSwgdHJ1ZSlcbiAgICBzZXRFbmFibGVXb3JkQm91bmRhcnlTZWFyY2goIWlzSWRPbmx5KVxuICB9LCBbcmVsYXRpb25UbywgY29sbGVjdGlvbnNdKVxuXG4gIC8vIFdoZW4gKGByZWxhdGlvblRvYCB8fCBgZmlsdGVyT3B0aW9uc1Jlc3VsdGAgfHwgYGxvY2FsZWApIGNoYW5nZXMsIHJlc2V0IGNvbXBvbmVudFxuICAvLyBOb3RlIC0gZWZmZWN0IHNob3VsZCBub3QgcnVuIG9uIGZpcnN0IHJ1blxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChmaXJzdFJ1bi5jdXJyZW50KSB7XG4gICAgICBmaXJzdFJ1bi5jdXJyZW50ID0gZmFsc2VcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGRpc3BhdGNoT3B0aW9ucyh7IHR5cGU6ICdDTEVBUicgfSlcbiAgICBzZXRMYXN0RnVsbHlMb2FkZWRSZWxhdGlvbigtMSlcbiAgICBzZXRMYXN0TG9hZGVkUGFnZSh7fSlcbiAgICBzZXRIYXNMb2FkZWRGaXJzdFBhZ2UoZmFsc2UpXG4gIH0sIFtyZWxhdGlvblRvLCBmaWx0ZXJPcHRpb25zUmVzdWx0LCBsb2NhbGVdKVxuXG4gIGNvbnN0IG9uU2F2ZSA9IHVzZUNhbGxiYWNrPERvY3VtZW50RHJhd2VyUHJvcHNbJ29uU2F2ZSddPihcbiAgICAoYXJncykgPT4ge1xuICAgICAgZGlzcGF0Y2hPcHRpb25zKHtcbiAgICAgICAgY29sbGVjdGlvbjogYXJncy5jb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIGRvYzogYXJncy5kb2MsXG4gICAgICAgIGkxOG4sXG4gICAgICAgIHR5cGU6ICdVUERBVEUnLFxuICAgICAgfSlcbiAgICB9LFxuICAgIFtpMThuLCBjb25maWddLFxuICApXG5cbiAgY29uc3QgZmlsdGVyT3B0aW9uID0gdXNlQ2FsbGJhY2soKGl0ZW06IE9wdGlvbiwgc2VhcmNoRmlsdGVyOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNlYXJjaEZpbHRlcikge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgY29uc3QgciA9IHdvcmRCb3VuZGFyaWVzUmVnZXgoc2VhcmNoRmlsdGVyIHx8ICcnKVxuICAgIC8vIGJyZWFraW5nIHRoZSBsYWJlbHMgdG8gc2VhcmNoIGludG8gc21hbGxlciBwYXJ0cyBpbmNyZWFzZXMgcGVyZm9ybWFuY2VcbiAgICBjb25zdCBicmVha0FwYXJ0VGhyZXNob2xkID0gMjUwXG4gICAgbGV0IHN0cmluZyA9IGl0ZW0ubGFiZWxcbiAgICAvLyBzdHJpbmdzIGxlc3MgdGhhbiBicmVha0FwYXJ0VGhyZXNob2xkIGxlbmd0aCB3b24ndCBiZSBjaHVua2VkXG4gICAgd2hpbGUgKHN0cmluZy5sZW5ndGggPiBicmVha0FwYXJ0VGhyZXNob2xkKSB7XG4gICAgICAvLyBzbGljaW5nIGJ5IHRoZSBuZXh0IHNwYWNlIGFmdGVyIHRoZSBsZW5ndGggb2YgdGhlIHNlYXJjaCBpbnB1dCBwcmV2ZW50cyBzbGljaW5nIHRoZSBzdHJpbmcgdXAgYnkgcGFydGlhbCB3b3Jkc1xuICAgICAgY29uc3QgaW5kZXhPZlNwYWNlID0gc3RyaW5nLmluZGV4T2YoJyAnLCBzZWFyY2hGaWx0ZXIubGVuZ3RoKVxuICAgICAgaWYgKHIudGVzdChzdHJpbmcuc2xpY2UoMCwgaW5kZXhPZlNwYWNlID09PSAtMSA/IHNlYXJjaEZpbHRlci5sZW5ndGggOiBpbmRleE9mU3BhY2UgKyAxKSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHN0cmluZyA9IHN0cmluZy5zbGljZShpbmRleE9mU3BhY2UgPT09IC0xID8gc2VhcmNoRmlsdGVyLmxlbmd0aCA6IGluZGV4T2ZTcGFjZSArIDEpXG4gICAgfVxuICAgIHJldHVybiByLnRlc3Qoc3RyaW5nLnNsaWNlKC1icmVha0FwYXJ0VGhyZXNob2xkKSlcbiAgfSwgW10pXG5cbiAgY29uc3QgdmFsdWVUb1JlbmRlciA9IGZpbmRPcHRpb25zQnlWYWx1ZSh7IG9wdGlvbnMsIHZhbHVlIH0pXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZVRvUmVuZGVyKSAmJiB2YWx1ZVRvUmVuZGVyPy52YWx1ZSA9PT0gJ251bGwnKSB2YWx1ZVRvUmVuZGVyLnZhbHVlID0gbnVsbFxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPXtbXG4gICAgICAgIGZpZWxkQmFzZUNsYXNzLFxuICAgICAgICBiYXNlQ2xhc3MsXG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgc2hvd0Vycm9yICYmICdlcnJvcicsXG4gICAgICAgIGVycm9yTG9hZGluZyAmJiAnZXJyb3ItbG9hZGluZycsXG4gICAgICAgIHJlYWRPbmx5ICYmIGAke2Jhc2VDbGFzc30tLXJlYWQtb25seWAsXG4gICAgICBdXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgLmpvaW4oJyAnKX1cbiAgICAgIGlkPXtgZmllbGQtJHtwYXRoT3JOYW1lLnJlcGxhY2UoL1xcLi9nLCAnX18nKX1gfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgIHdpZHRoLFxuICAgICAgfX1cbiAgICA+XG4gICAgICA8RXJyb3IgbWVzc2FnZT17ZXJyb3JNZXNzYWdlfSBzaG93RXJyb3I9e3Nob3dFcnJvcn0gLz5cbiAgICAgIDxMYWJlbCBodG1sRm9yPXtwYXRoT3JOYW1lfSBsYWJlbD17bGFiZWx9IHJlcXVpcmVkPXtyZXF1aXJlZH0gLz5cbiAgICAgIDxHZXRGaWx0ZXJPcHRpb25zXG4gICAgICAgIHsuLi57XG4gICAgICAgICAgZmlsdGVyT3B0aW9ucyxcbiAgICAgICAgICBmaWx0ZXJPcHRpb25zUmVzdWx0LFxuICAgICAgICAgIHBhdGg6IHBhdGhPck5hbWUsXG4gICAgICAgICAgcmVsYXRpb25UbyxcbiAgICAgICAgICBzZXRGaWx0ZXJPcHRpb25zUmVzdWx0LFxuICAgICAgICB9fVxuICAgICAgLz5cbiAgICAgIHshZXJyb3JMb2FkaW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX3dyYXBgfT5cbiAgICAgICAgICA8UmVhY3RTZWxlY3RcbiAgICAgICAgICAgIGJhY2tzcGFjZVJlbW92ZXNWYWx1ZT17IWRyYXdlcklzT3Blbn1cbiAgICAgICAgICAgIGNvbXBvbmVudHM9e3tcbiAgICAgICAgICAgICAgTXVsdGlWYWx1ZUxhYmVsLFxuICAgICAgICAgICAgICBTaW5nbGVWYWx1ZSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjdXN0b21Qcm9wcz17e1xuICAgICAgICAgICAgICBkaXNhYmxlS2V5RG93bjogZHJhd2VySXNPcGVuLFxuICAgICAgICAgICAgICBkaXNhYmxlTW91c2VEb3duOiBkcmF3ZXJJc09wZW4sXG4gICAgICAgICAgICAgIG9uU2F2ZSxcbiAgICAgICAgICAgICAgc2V0RHJhd2VySXNPcGVuLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtyZWFkT25seSB8fCBmb3JtUHJvY2Vzc2luZ31cbiAgICAgICAgICAgIGZpbHRlck9wdGlvbj17ZW5hYmxlV29yZEJvdW5kYXJ5U2VhcmNoID8gZmlsdGVyT3B0aW9uIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICBpc011bHRpPXtoYXNNYW55fVxuICAgICAgICAgICAgaXNTb3J0YWJsZT17aXNTb3J0YWJsZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtcbiAgICAgICAgICAgICAgIXJlYWRPbmx5XG4gICAgICAgICAgICAgICAgPyAoc2VsZWN0ZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoaGFzTWFueSA/IFtdIDogbnVsbClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNNYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGVjdGVkLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzTXVsdGlwbGVSZWxhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiBvcHRpb24ucmVsYXRpb25UbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhc011bHRpcGxlUmVsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25Ubzogc2VsZWN0ZWQucmVsYXRpb25UbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxlY3RlZC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKHNlbGVjdGVkLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uSW5wdXRDaGFuZ2U9eyhuZXdTZWFyY2gpID0+IGhhbmRsZUlucHV0Q2hhbmdlKG5ld1NlYXJjaCwgdmFsdWUpfVxuICAgICAgICAgICAgb25NZW51T3Blbj17KCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWhhc0xvYWRlZEZpcnN0UGFnZSkge1xuICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyh0cnVlKVxuICAgICAgICAgICAgICAgIGdldFJlc3VsdHMoe1xuICAgICAgICAgICAgICAgICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEhhc0xvYWRlZEZpcnN0UGFnZSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGluaXRpYWxWYWx1ZSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25NZW51U2Nyb2xsVG9Cb3R0b209eygpID0+IHtcbiAgICAgICAgICAgICAgZ2V0UmVzdWx0cyh7XG4gICAgICAgICAgICAgICAgbGFzdEZ1bGx5TG9hZGVkUmVsYXRpb24sXG4gICAgICAgICAgICAgICAgc2VhcmNoLFxuICAgICAgICAgICAgICAgIHNvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsVmFsdWUsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb3B0aW9ucz17b3B0aW9uc31cbiAgICAgICAgICAgIHNob3dFcnJvcj17c2hvd0Vycm9yfVxuICAgICAgICAgICAgdmFsdWU9e3ZhbHVlVG9SZW5kZXIgPz8gbnVsbH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHshcmVhZE9ubHkgJiYgYWxsb3dDcmVhdGUgJiYgKFxuICAgICAgICAgICAgPEFkZE5ld1JlbGF0aW9uXG4gICAgICAgICAgICAgIHsuLi57XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGhhc01hbnksXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoT3JOYW1lLFxuICAgICAgICAgICAgICAgIHJlbGF0aW9uVG8sXG4gICAgICAgICAgICAgICAgc2V0VmFsdWUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIHtlcnJvckxvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2Vycm9yLWxvYWRpbmdgfT57ZXJyb3JMb2FkaW5nfTwvZGl2Pn1cbiAgICAgIDxGaWVsZERlc2NyaXB0aW9uIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn0gdmFsdWU9e3ZhbHVlfSAvPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhDb25kaXRpb24oUmVsYXRpb25zaGlwKVxuIl0sIm5hbWVzIjpbIm1heFJlc3VsdHNQZXJSZXF1ZXN0IiwiYmFzZUNsYXNzIiwiUmVsYXRpb25zaGlwIiwicHJvcHMiLCJuYW1lIiwiYWRtaW4iLCJhbGxvd0NyZWF0ZSIsImNsYXNzTmFtZSIsImNvbmRpdGlvbiIsImRlc2NyaXB0aW9uIiwiaXNTb3J0YWJsZSIsInJlYWRPbmx5Iiwic3R5bGUiLCJ3aWR0aCIsImZpbHRlck9wdGlvbnMiLCJoYXNNYW55IiwibGFiZWwiLCJwYXRoIiwicmVsYXRpb25UbyIsInJlcXVpcmVkIiwidmFsaWRhdGUiLCJyZWxhdGlvbnNoaXAiLCJjb25maWciLCJ1c2VDb25maWciLCJjb2xsZWN0aW9ucyIsInJvdXRlcyIsImFwaSIsInNlcnZlclVSTCIsImkxOG4iLCJ0IiwidXNlVHJhbnNsYXRpb24iLCJwZXJtaXNzaW9ucyIsInVzZUF1dGgiLCJjb2RlIiwibG9jYWxlIiwidXNlTG9jYWxlIiwiZm9ybVByb2Nlc3NpbmciLCJ1c2VGb3JtUHJvY2Vzc2luZyIsImhhc011bHRpcGxlUmVsYXRpb25zIiwiQXJyYXkiLCJpc0FycmF5Iiwib3B0aW9ucyIsImRpc3BhdGNoT3B0aW9ucyIsInVzZVJlZHVjZXIiLCJvcHRpb25zUmVkdWNlciIsImxhc3RGdWxseUxvYWRlZFJlbGF0aW9uIiwic2V0TGFzdEZ1bGx5TG9hZGVkUmVsYXRpb24iLCJ1c2VTdGF0ZSIsImxhc3RMb2FkZWRQYWdlIiwic2V0TGFzdExvYWRlZFBhZ2UiLCJlcnJvckxvYWRpbmciLCJzZXRFcnJvckxvYWRpbmciLCJmaWx0ZXJPcHRpb25zUmVzdWx0Iiwic2V0RmlsdGVyT3B0aW9uc1Jlc3VsdCIsInNlYXJjaCIsInNldFNlYXJjaCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImhhc0xvYWRlZEZpcnN0UGFnZSIsInNldEhhc0xvYWRlZEZpcnN0UGFnZSIsImVuYWJsZVdvcmRCb3VuZGFyeVNlYXJjaCIsInNldEVuYWJsZVdvcmRCb3VuZGFyeVNlYXJjaCIsImZpcnN0UnVuIiwidXNlUmVmIiwicGF0aE9yTmFtZSIsIm1lbW9pemVkVmFsaWRhdGUiLCJ1c2VDYWxsYmFjayIsInZhbHVlIiwidmFsaWRhdGlvbk9wdGlvbnMiLCJlcnJvck1lc3NhZ2UiLCJpbml0aWFsVmFsdWUiLCJzZXRWYWx1ZSIsInNob3dFcnJvciIsInVzZUZpZWxkIiwiZHJhd2VySXNPcGVuIiwic2V0RHJhd2VySXNPcGVuIiwiZ2V0UmVzdWx0cyIsImxhc3RGdWxseUxvYWRlZFJlbGF0aW9uQXJnIiwib25TdWNjZXNzIiwic2VhcmNoQXJnIiwic29ydCIsInZhbHVlQXJnIiwibGFzdEZ1bGx5TG9hZGVkUmVsYXRpb25Ub1VzZSIsInJlbGF0aW9ucyIsInJlbGF0aW9uc1RvRmV0Y2giLCJzbGljZSIsInJlc3VsdHNGZXRjaGVkIiwicmVsYXRpb25NYXAiLCJjcmVhdGVSZWxhdGlvbk1hcCIsInJlZHVjZSIsInByaW9yUmVsYXRpb24iLCJyZWxhdGlvbiIsImxhc3RMb2FkZWRQYWdlVG9Vc2UiLCJjb2xsZWN0aW9uIiwiZmluZCIsImNvbGwiLCJzbHVnIiwiZmllbGRUb1NlYXJjaCIsInVzZUFzVGl0bGUiLCJxdWVyeSIsImRlcHRoIiwibGltaXQiLCJwYWdlIiwid2hlcmUiLCJhbmQiLCJpZCIsIm5vdF9pbiIsInB1c2giLCJsaWtlIiwicmVzcG9uc2UiLCJmZXRjaCIsInFzIiwic3RyaW5naWZ5IiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwibGFuZ3VhZ2UiLCJvayIsImRhdGEiLCJqc29uIiwicHJldlN0YXRlIiwibmV4dFBhZ2UiLCJpbmRleE9mIiwiZG9jcyIsImxlbmd0aCIsInR5cGUiLCJzdGF0dXMiLCJpZHMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInVwZGF0ZVNlYXJjaCIsInVzZURlYm91bmNlZENhbGxiYWNrIiwiaGFuZGxlSW5wdXRDaGFuZ2UiLCJ1c2VFZmZlY3QiLCJPYmplY3QiLCJlbnRyaWVzIiwiaWRzVG9Mb2FkIiwiZmlsdGVyIiwib3B0aW9uR3JvdXAiLCJvcHRpb24iLCJpbiIsImlzSWRPbmx5IiwiaWRPbmx5IiwiY3VycmVudCIsIm9uU2F2ZSIsImFyZ3MiLCJjb2xsZWN0aW9uQ29uZmlnIiwiZG9jIiwiZmlsdGVyT3B0aW9uIiwiaXRlbSIsInNlYXJjaEZpbHRlciIsInIiLCJ3b3JkQm91bmRhcmllc1JlZ2V4IiwiYnJlYWtBcGFydFRocmVzaG9sZCIsInN0cmluZyIsImluZGV4T2ZTcGFjZSIsInRlc3QiLCJ2YWx1ZVRvUmVuZGVyIiwiZmluZE9wdGlvbnNCeVZhbHVlIiwiZGl2IiwiZmllbGRCYXNlQ2xhc3MiLCJCb29sZWFuIiwiam9pbiIsInJlcGxhY2UiLCJFcnJvciIsIm1lc3NhZ2UiLCJMYWJlbCIsImh0bWxGb3IiLCJHZXRGaWx0ZXJPcHRpb25zIiwiUmVhY3RTZWxlY3QiLCJiYWNrc3BhY2VSZW1vdmVzVmFsdWUiLCJjb21wb25lbnRzIiwiTXVsdGlWYWx1ZUxhYmVsIiwiU2luZ2xlVmFsdWUiLCJjdXN0b21Qcm9wcyIsImRpc2FibGVLZXlEb3duIiwiZGlzYWJsZU1vdXNlRG93biIsImRpc2FibGVkIiwidW5kZWZpbmVkIiwiaXNNdWx0aSIsIm9uQ2hhbmdlIiwic2VsZWN0ZWQiLCJtYXAiLCJvbklucHV0Q2hhbmdlIiwibmV3U2VhcmNoIiwib25NZW51T3BlbiIsIm9uTWVudVNjcm9sbFRvQm90dG9tIiwiQWRkTmV3UmVsYXRpb24iLCJGaWVsZERlc2NyaXB0aW9uIiwid2l0aENvbmRpdGlvbiJdLCJtYXBwaW5ncyI6Ijs7OzsrQkF3Z0JBOzs7ZUFBQTs7OzJEQXhnQmU7K0RBQzZEOzhCQUM3Qzs2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