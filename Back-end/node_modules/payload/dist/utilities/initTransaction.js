"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "initTransaction", {
    enumerable: true,
    get: function() {
        return initTransaction;
    }
});
async function initTransaction(req) {
    const { payload, transactionID } = req;
    if (!transactionID && typeof payload.db.beginTransaction === 'function') {
        req.transactionID = await payload.db.beginTransaction();
        if (req.transactionID) {
            return true;
        }
    }
    return false;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvaW5pdFRyYW5zYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGF5bG9hZFJlcXVlc3QgfSBmcm9tICcuLi9leHByZXNzL3R5cGVzJ1xuXG4vKipcbiAqIFN0YXJ0cyBhIG5ldyB0cmFuc2FjdGlvbiB1c2luZyB0aGUgZGIgYWRhcHRlciB3aXRoIGEgcmFuZG9tIGlkIGFuZCB0aGVuIGFzc2lnbnMgaXQgdG8gdGhlIHJlcS50cmFuc2FjdGlvblxuICogQHJldHVybnMgdHJ1ZSBpZiBiZWdpbm5pbmcgYSB0cmFuc2FjdGlvbiBhbmQgZmFsc2Ugd2hlbiByZXEgYWxyZWFkeSBoYXMgYSB0cmFuc2FjdGlvbiB0byB1c2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRUcmFuc2FjdGlvbihyZXE6IFBheWxvYWRSZXF1ZXN0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHsgcGF5bG9hZCwgdHJhbnNhY3Rpb25JRCB9ID0gcmVxXG4gIGlmICghdHJhbnNhY3Rpb25JRCAmJiB0eXBlb2YgcGF5bG9hZC5kYi5iZWdpblRyYW5zYWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmVxLnRyYW5zYWN0aW9uSUQgPSBhd2FpdCBwYXlsb2FkLmRiLmJlZ2luVHJhbnNhY3Rpb24oKVxuICAgIGlmIChyZXEudHJhbnNhY3Rpb25JRCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG4iXSwibmFtZXMiOlsiaW5pdFRyYW5zYWN0aW9uIiwicmVxIiwicGF5bG9hZCIsInRyYW5zYWN0aW9uSUQiLCJkYiIsImJlZ2luVHJhbnNhY3Rpb24iXSwibWFwcGluZ3MiOiI7Ozs7K0JBTXNCQTs7O2VBQUFBOzs7QUFBZixlQUFlQSxnQkFBZ0JDLEdBQW1CO0lBQ3ZELE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxhQUFhLEVBQUUsR0FBR0Y7SUFDbkMsSUFBSSxDQUFDRSxpQkFBaUIsT0FBT0QsUUFBUUUsRUFBRSxDQUFDQyxnQkFBZ0IsS0FBSyxZQUFZO1FBQ3ZFSixJQUFJRSxhQUFhLEdBQUcsTUFBTUQsUUFBUUUsRUFBRSxDQUFDQyxnQkFBZ0I7UUFDckQsSUFBSUosSUFBSUUsYUFBYSxFQUFFO1lBQ3JCLE9BQU87UUFDVDtJQUNGO0lBQ0EsT0FBTztBQUNUIn0=