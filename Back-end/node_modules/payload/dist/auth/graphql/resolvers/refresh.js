"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _getExtractJWT = /*#__PURE__*/ _interop_require_default(require("../../getExtractJWT"));
const _refresh = /*#__PURE__*/ _interop_require_default(require("../../operations/refresh"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function refreshResolver(collection) {
    async function resolver(_, args, context) {
        let token;
        const extractJWT = (0, _getExtractJWT.default)(context.req.payload.config);
        token = extractJWT(context.req);
        if (args.token) {
            token = args.token;
        }
        const options = {
            collection,
            depth: 0,
            req: context.req,
            res: context.res,
            token
        };
        const result = await (0, _refresh.default)(options);
        return result;
    }
    return resolver;
}
const _default = refreshResolver;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdXRoL2dyYXBocWwvcmVzb2x2ZXJzL3JlZnJlc2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vY29sbGVjdGlvbnMvY29uZmlnL3R5cGVzJ1xuXG5pbXBvcnQgZ2V0RXh0cmFjdEpXVCBmcm9tICcuLi8uLi9nZXRFeHRyYWN0SldUJ1xuaW1wb3J0IHJlZnJlc2ggZnJvbSAnLi4vLi4vb3BlcmF0aW9ucy9yZWZyZXNoJ1xuXG5mdW5jdGlvbiByZWZyZXNoUmVzb2x2ZXIoY29sbGVjdGlvbjogQ29sbGVjdGlvbikge1xuICBhc3luYyBmdW5jdGlvbiByZXNvbHZlcihfLCBhcmdzLCBjb250ZXh0KSB7XG4gICAgbGV0IHRva2VuXG5cbiAgICBjb25zdCBleHRyYWN0SldUID0gZ2V0RXh0cmFjdEpXVChjb250ZXh0LnJlcS5wYXlsb2FkLmNvbmZpZylcbiAgICB0b2tlbiA9IGV4dHJhY3RKV1QoY29udGV4dC5yZXEpXG5cbiAgICBpZiAoYXJncy50b2tlbikge1xuICAgICAgdG9rZW4gPSBhcmdzLnRva2VuXG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBkZXB0aDogMCxcbiAgICAgIHJlcTogY29udGV4dC5yZXEsXG4gICAgICByZXM6IGNvbnRleHQucmVzLFxuICAgICAgdG9rZW4sXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVmcmVzaChvcHRpb25zKVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgcmV0dXJuIHJlc29sdmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlZnJlc2hSZXNvbHZlclxuIl0sIm5hbWVzIjpbInJlZnJlc2hSZXNvbHZlciIsImNvbGxlY3Rpb24iLCJyZXNvbHZlciIsIl8iLCJhcmdzIiwiY29udGV4dCIsInRva2VuIiwiZXh0cmFjdEpXVCIsImdldEV4dHJhY3RKV1QiLCJyZXEiLCJwYXlsb2FkIiwiY29uZmlnIiwib3B0aW9ucyIsImRlcHRoIiwicmVzIiwicmVzdWx0IiwicmVmcmVzaCJdLCJtYXBwaW5ncyI6Ijs7OzsrQkFnQ0E7OztlQUFBOzs7c0VBOUIwQjtnRUFDTjs7Ozs7O0FBRXBCLFNBQVNBLGdCQUFnQkMsVUFBc0I7SUFDN0MsZUFBZUMsU0FBU0MsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLE9BQU87UUFDdEMsSUFBSUM7UUFFSixNQUFNQyxhQUFhQyxJQUFBQSxzQkFBYSxFQUFDSCxRQUFRSSxHQUFHLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTTtRQUMzREwsUUFBUUMsV0FBV0YsUUFBUUksR0FBRztRQUU5QixJQUFJTCxLQUFLRSxLQUFLLEVBQUU7WUFDZEEsUUFBUUYsS0FBS0UsS0FBSztRQUNwQjtRQUVBLE1BQU1NLFVBQVU7WUFDZFg7WUFDQVksT0FBTztZQUNQSixLQUFLSixRQUFRSSxHQUFHO1lBQ2hCSyxLQUFLVCxRQUFRUyxHQUFHO1lBQ2hCUjtRQUNGO1FBRUEsTUFBTVMsU0FBUyxNQUFNQyxJQUFBQSxnQkFBTyxFQUFDSjtRQUU3QixPQUFPRztJQUNUO0lBRUEsT0FBT2I7QUFDVDtNQUVBLFdBQWVGIn0=