"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _formatName = /*#__PURE__*/ _interop_require_default(require("../../../graphql/utilities/formatName"));
const _access = /*#__PURE__*/ _interop_require_default(require("../../operations/access"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const formatConfigNames = (results, configs)=>{
    const formattedResults = {
        ...results
    };
    configs.forEach(({ slug })=>{
        const result = {
            ...formattedResults[slug] || {}
        };
        delete formattedResults[slug];
        formattedResults[(0, _formatName.default)(slug)] = result;
    });
    return formattedResults;
};
function accessResolver(payload) {
    async function resolver(_, args, context) {
        const options = {
            req: context.req
        };
        const accessResults = await (0, _access.default)(options);
        return {
            ...accessResults,
            ...formatConfigNames(accessResults.collections, payload.config.collections),
            ...formatConfigNames(accessResults.globals, payload.config.globals)
        };
    }
    return resolver;
}
const _default = accessResolver;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdXRoL2dyYXBocWwvcmVzb2x2ZXJzL2FjY2Vzcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFBheWxvYWQgfSBmcm9tICcuLi8uLi8uLi9wYXlsb2FkJ1xuXG5pbXBvcnQgZm9ybWF0TmFtZSBmcm9tICcuLi8uLi8uLi9ncmFwaHFsL3V0aWxpdGllcy9mb3JtYXROYW1lJ1xuaW1wb3J0IGFjY2VzcyBmcm9tICcuLi8uLi9vcGVyYXRpb25zL2FjY2VzcydcblxuY29uc3QgZm9ybWF0Q29uZmlnTmFtZXMgPSAocmVzdWx0cywgY29uZmlncykgPT4ge1xuICBjb25zdCBmb3JtYXR0ZWRSZXN1bHRzID0geyAuLi5yZXN1bHRzIH1cblxuICBjb25maWdzLmZvckVhY2goKHsgc2x1ZyB9KSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi4oZm9ybWF0dGVkUmVzdWx0c1tzbHVnXSB8fCB7fSkgfVxuICAgIGRlbGV0ZSBmb3JtYXR0ZWRSZXN1bHRzW3NsdWddXG4gICAgZm9ybWF0dGVkUmVzdWx0c1tmb3JtYXROYW1lKHNsdWcpXSA9IHJlc3VsdFxuICB9KVxuXG4gIHJldHVybiBmb3JtYXR0ZWRSZXN1bHRzXG59XG5cbmZ1bmN0aW9uIGFjY2Vzc1Jlc29sdmVyKHBheWxvYWQ6IFBheWxvYWQpIHtcbiAgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZXIoXywgYXJncywgY29udGV4dCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICByZXE6IGNvbnRleHQucmVxLFxuICAgIH1cblxuICAgIGNvbnN0IGFjY2Vzc1Jlc3VsdHMgPSBhd2FpdCBhY2Nlc3Mob3B0aW9ucylcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5hY2Nlc3NSZXN1bHRzLFxuICAgICAgLi4uZm9ybWF0Q29uZmlnTmFtZXMoYWNjZXNzUmVzdWx0cy5jb2xsZWN0aW9ucywgcGF5bG9hZC5jb25maWcuY29sbGVjdGlvbnMpLFxuICAgICAgLi4uZm9ybWF0Q29uZmlnTmFtZXMoYWNjZXNzUmVzdWx0cy5nbG9iYWxzLCBwYXlsb2FkLmNvbmZpZy5nbG9iYWxzKSxcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzb2x2ZXJcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWNjZXNzUmVzb2x2ZXJcbiJdLCJuYW1lcyI6WyJmb3JtYXRDb25maWdOYW1lcyIsInJlc3VsdHMiLCJjb25maWdzIiwiZm9ybWF0dGVkUmVzdWx0cyIsImZvckVhY2giLCJzbHVnIiwicmVzdWx0IiwiZm9ybWF0TmFtZSIsImFjY2Vzc1Jlc29sdmVyIiwicGF5bG9hZCIsInJlc29sdmVyIiwiXyIsImFyZ3MiLCJjb250ZXh0Iiwib3B0aW9ucyIsInJlcSIsImFjY2Vzc1Jlc3VsdHMiLCJhY2Nlc3MiLCJjb2xsZWN0aW9ucyIsImNvbmZpZyIsImdsb2JhbHMiXSwibWFwcGluZ3MiOiI7Ozs7K0JBbUNBOzs7ZUFBQTs7O21FQWpDdUI7K0RBQ0o7Ozs7OztBQUVuQixNQUFNQSxvQkFBb0IsQ0FBQ0MsU0FBU0M7SUFDbEMsTUFBTUMsbUJBQW1CO1FBQUUsR0FBR0YsT0FBTztJQUFDO0lBRXRDQyxRQUFRRSxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUU7UUFDdkIsTUFBTUMsU0FBUztZQUFFLEdBQUlILGdCQUFnQixDQUFDRSxLQUFLLElBQUksQ0FBQyxDQUFDO1FBQUU7UUFDbkQsT0FBT0YsZ0JBQWdCLENBQUNFLEtBQUs7UUFDN0JGLGdCQUFnQixDQUFDSSxJQUFBQSxtQkFBVSxFQUFDRixNQUFNLEdBQUdDO0lBQ3ZDO0lBRUEsT0FBT0g7QUFDVDtBQUVBLFNBQVNLLGVBQWVDLE9BQWdCO0lBQ3RDLGVBQWVDLFNBQVNDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxPQUFPO1FBQ3RDLE1BQU1DLFVBQVU7WUFDZEMsS0FBS0YsUUFBUUUsR0FBRztRQUNsQjtRQUVBLE1BQU1DLGdCQUFnQixNQUFNQyxJQUFBQSxlQUFNLEVBQUNIO1FBRW5DLE9BQU87WUFDTCxHQUFHRSxhQUFhO1lBQ2hCLEdBQUdoQixrQkFBa0JnQixjQUFjRSxXQUFXLEVBQUVULFFBQVFVLE1BQU0sQ0FBQ0QsV0FBVyxDQUFDO1lBQzNFLEdBQUdsQixrQkFBa0JnQixjQUFjSSxPQUFPLEVBQUVYLFFBQVFVLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDO1FBQ3JFO0lBQ0Y7SUFFQSxPQUFPVjtBQUNUO01BRUEsV0FBZUYifQ==