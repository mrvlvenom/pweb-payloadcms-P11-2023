"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "rollbackTransaction", {
    enumerable: true,
    get: function() {
        return rollbackTransaction;
    }
});
const rollbackTransaction = async function rollbackTransaction(id = '') {
    if (!this.sessions[id]?.inTransaction()) {
        this.payload.logger.warn('rollbackTransaction called when no transaction exists');
        return;
    }
    await this.sessions[id].abortTransaction();
    await this.sessions[id].endSession();
    delete this.sessions[id];
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmFuc2FjdGlvbnMvcm9sbGJhY2tUcmFuc2FjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJvbGxiYWNrVHJhbnNhY3Rpb24gfSBmcm9tICdwYXlsb2FkL2RhdGFiYXNlJ1xuXG5leHBvcnQgY29uc3Qgcm9sbGJhY2tUcmFuc2FjdGlvbjogUm9sbGJhY2tUcmFuc2FjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHJvbGxiYWNrVHJhbnNhY3Rpb24oXG4gIGlkID0gJycsXG4pIHtcbiAgaWYgKCF0aGlzLnNlc3Npb25zW2lkXT8uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgdGhpcy5wYXlsb2FkLmxvZ2dlci53YXJuKCdyb2xsYmFja1RyYW5zYWN0aW9uIGNhbGxlZCB3aGVuIG5vIHRyYW5zYWN0aW9uIGV4aXN0cycpXG4gICAgcmV0dXJuXG4gIH1cbiAgYXdhaXQgdGhpcy5zZXNzaW9uc1tpZF0uYWJvcnRUcmFuc2FjdGlvbigpXG4gIGF3YWl0IHRoaXMuc2Vzc2lvbnNbaWRdLmVuZFNlc3Npb24oKVxuICBkZWxldGUgdGhpcy5zZXNzaW9uc1tpZF1cbn1cbiJdLCJuYW1lcyI6WyJyb2xsYmFja1RyYW5zYWN0aW9uIiwiaWQiLCJzZXNzaW9ucyIsImluVHJhbnNhY3Rpb24iLCJwYXlsb2FkIiwibG9nZ2VyIiwid2FybiIsImFib3J0VHJhbnNhY3Rpb24iLCJlbmRTZXNzaW9uIl0sIm1hcHBpbmdzIjoiOzs7OytCQUVhQTs7O2VBQUFBOzs7QUFBTixNQUFNQSxzQkFBMkMsZUFBZUEsb0JBQ3JFQyxLQUFLLEVBQUU7SUFFUCxJQUFJLENBQUMsSUFBSSxDQUFDQyxRQUFRLENBQUNELEdBQUcsRUFBRUUsaUJBQWlCO1FBQ3ZDLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQztRQUN6QjtJQUNGO0lBQ0EsTUFBTSxJQUFJLENBQUNKLFFBQVEsQ0FBQ0QsR0FBRyxDQUFDTSxnQkFBZ0I7SUFDeEMsTUFBTSxJQUFJLENBQUNMLFFBQVEsQ0FBQ0QsR0FBRyxDQUFDTyxVQUFVO0lBQ2xDLE9BQU8sSUFBSSxDQUFDTixRQUFRLENBQUNELEdBQUc7QUFDMUIifQ==